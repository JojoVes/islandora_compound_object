{#
/**
 * @file
 * This is the template file for compound objects.
 *
 * @TODO: needs documentation about file and variables
 * Available variables:
 * parent_label - Title of compound object
 * child_count - Count of objects in compound object
 * parent_url - URL to manage compound object
 * previous_pid - PID of previous object in sequence or blank if on first
 * next_pid - PID of next object in sequence or blank if on last
 * siblings - array of PIDs of sibling objects in compound
 * themed_siblings - array of siblings of model
 *    array(
 *      'pid' => PID of sibling,
 *      'label' => label of sibling,
 *      'TN' => URL of thumbnail or default folder if no datastream,
 *      'class' => array of classes for this sibling,
 *    )
 * islandora_compound_title - title for child objects:
 *   'Part of: parent_label (child_count object(s))'
 */
#}
<div class="islandora-compound-prev-next">
  <span class="islandora-compound-title">
    {{ islandora_compound_title|t }}
    {% if parent_url %}
      {{ link('manage parent', parent_url)|t }}
    {% endif %}
    {% if parent_tn %}
      {% set parent_tn_link_text %}
        <img
          src="{{ parent_tn }}"
          alt="{{ parent_label|t }}"
        >
      {% endset %}
      {% set parent_pid_link %}
        base:islandora/object/{{ parent_pid }}
      {% endset %}
      {{
        link(parent_tn_link_text, parent_pid_link)
      }}
    {% endif %}
  </span><br/>

  {% if previous_pid is not empty %}
    {% set previous_pid_link %}
      base:islandora/object/{{ previous_pid }}
    {% endset %}
    {{
      link('Previous', previous_pid_link)|t
    }}
  %}
  {% endif %}
  {% if (previous_pid is not empty) and (next_pid is not empty) %}
    |
  {% endif %}
  {% if next_pid is not empty %}
    {% set next_pid_link %}
      base:islandora/object/{{ next_pid }}
    {% endset %}
    {{
      link('Next', next_pid_link)|t
    }}
  {% endif %}

  {% if themed_siblings|length > 0 %}
    <div class="islandora-compound-thumbs">
    {% for sibling in themed_siblings %}
      <div class="islandora-compound-thumb">
        <span class='islandora-compound-caption'>{{ sibling.label }}</span>
        {% set sibling_tn %}
          <img
            src="{{ sibling.TN }}"
            class="{{ sibling.class }}"
            title="{{ sibling.label }}"
            alt="{{ sibling.label }}"
          >
        {% endset %}
        {% set sibling_pid_link %}
          base:islandora/object/{{ sibling.pid }}
        {% endset %}
        {{
          link(sibling_tn, sibling_pid_link)|t
        }}
      </div>
    {% endfor %}
   </div> {# islandora-compound-thumbs #}
 {% endif %}
 </div>
