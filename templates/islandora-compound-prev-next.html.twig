{#
/**
 * @file
 * This is the template file for compound objects.
 *
 * @TODO: needs documentation about file and variables
 * Available variables:
 * parent_label - Title of compound object
 * child_count - Count of objects in compound object
 * parent_url - URL to manage compound object
 * previous_pid - PID of previous object in sequence or blank if on first
 * next_pid - PID of next object in sequence or blank if on last
 * siblings - array of PIDs of sibling objects in compound
 * themed_siblings - array of siblings of model
 *    array(
 *      'pid' => PID of sibling,
 *      'label' => label of sibling,
 *      'TN' => URL of thumbnail or default folder if no datastream,
 *      'class' => array of classes for this sibling,
 *    )
 */
#}
<div class="islandora-compound-prev-next">
//WTF
  <span class="islandora-compound-title">{{
    ('Part of: @parent (@count @objects)', [
      '@parent' => $parent_label,
      '@count' => $child_count,
      '@objects' => \Drupal::translation()->formatPlural($child_count, 'object', 'objects')
    ])
   |t }}
    {% if parent_url %}
      {{ l(t('manage parent'), $parent_url) |t }}
    {% endif %}
    {% if parent_tn %}
//WTF
      {{
        l(
          theme_image(
            array(
              'path' => $parent_tn,
              'attributes' => array(
                'alt' => $parent_label,
              ),
            )
          ),
          'islandora/object/' . $parent_pid,
          array('html' => TRUE)
        );
      }}
    {% endif %}
  </span><br/>

  {% if previous_pid is not empty %}
//WTF
    {{
      l(t('Previous'), 'islandora/object/' . $previous_pid);
    }}
  %}
  {% endif %}
  {% if (previous_pid is not empty) and (next_pid is not empty) %}
    |
  {% endif %}
  {% if next_pid is not empty %}
//WTF
    {{
      l(t('Next'), 'islandora/object/' . $next_pid);
    }}
  {% endif %}

  {% if themed_siblings|length > 0) %}
//WTF
    <?php $query_params = \Drupal\Component\Utility\UrlHelper::filterQueryParameters(); ?>
    <div class="islandora-compound-thumbs">
    {% for sibling in themed_siblings %}
      <div class="islandora-compound-thumb">
        <span class='islandora-compound-caption'>{{ sibling.label }}</span>
//WTF
        {{
          l(
            theme_image(
              array(
                'path' => $sibling['TN'],
                'attributes' => array(
                  'class' => $sibling['class'],
                  'title' => $sibling['label'],
                  'alt' => $sibling['label'],
                ),
              )
            ),
            'islandora/object/' . $sibling['pid'],
            array(
              'html' => TRUE,
              'query' => $query_params,
              'attributes' => array(
                'title' => $sibling['label'],
              )
            )
          );
        }}
      </div>
    {% endfor %}
   </div> {# islandora-compound-thumbs #}
 {% endif %}
 </div>
